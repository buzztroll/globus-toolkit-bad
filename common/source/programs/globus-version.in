#! /bin/sh
#
# Displays the Globus version
#
# Synopsis: globus-version [-help] [-full] [-dirt]
#

set -f

DIRT_TIMESTAMP="@DIRT_TIMESTAMP@"
DIRT_BRANCH_ID="@DIRT_BRANCH_ID@"

#
# Grab the version info set by the installer
#

GLOBUS_VERSIONNAME="@GLOBUS_VERSIONNAME@"
GLOBUS_VERSION="@GLOBUS_VERSION@"

usage()
{
    ${GLOBUS_SH_CAT-cat} 1>&2 <<EOF

globus-version [-help] [-full] [-dirt]

    Displays the installed Globus version. Can also show the dirt
    timestamp and tag id.

    Options:
        -help        Shows help and exits
        -full        Show expanded version description
        -dirt        Shows dirt info and exits

    If no option is given, displays the Globus version.

EOF
}



case "$1" in
    -h|-help|-usage|--help)
        usage
        ;;
    -dirt)
        echo "$DIRT_TIMESTAMP-$DIRT_BRANCH_ID"
        ;;
    -full)
        echo "$GLOBUS_VERSIONNAME $GLOBUS_VERSION"
        ;;
    *)
        echo $GLOBUS_VERSION
        ;;
esac

