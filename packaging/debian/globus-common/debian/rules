#!/usr/bin/make -f
# -*- makefile -*-

# see EXAMPLES in dpkg-buildflags(1) and read /usr/share/dpkg/*
DPKG_EXPORT_BUILDFLAGS = 1
include /usr/share/dpkg/default.mk

# see FEATURE AREAS in dpkg-buildflags(1)
#export DEB_BUILD_MAINT_OPTIONS = hardening=+all

# This causes globus to skip dns resolution tests
export NO_EXTERNAL_NET=1

name = globus-common
_prefix = /usr
_includedir = $(_prefix)/include
_datadir = $(_prefix)/share
_docdir = $(_datadir)/doc
_localstatedir = /var
_sharedstatedir = $(_localstatedir)
_sysconfdir = /etc
perl_vendorlib = $(shell eval "`perl -V:installvendorlib`"; echo $$installvendorlib)

override_dh_auto_configure:
	dh_auto_configure -- \
	   --docdir='$(_docdir)/lib$(name)0' \
	   --includedir='$(_includedir)/globus' \
	   --datadir='$(_datadir)/globus' \
	   --libexecdir='$(_datadir)/globus' \
	   --localstatedir='$(_localstatedir)' \
	   --sharedstatedir='$(_sharedstatedir)' \
	   --sysconfdir='$(_sysconfdir)' \
	   --with-perlmoduledir=$(perl_vendorlib) \
	   --disable-static \
	   --with-backward-compatibility-hack

%:
	dh $@

override_dh_builddeb:
	dh_builddeb -- -Zxz

.PHONY: override_dh_auto_configure override_dh_builddeb
